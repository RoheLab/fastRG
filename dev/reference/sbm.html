<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Create an undirected stochastic blockmodel object — sbm • fastRG</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/paper/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Create an undirected stochastic blockmodel object — sbm" />
<meta property="og:description" content="To specify a stochastic blockmodel, you must specify
the number of nodes (via n), the mixing matrix (via k or B),
and the relative block probabilites (optional, via pi).
We provide sane defaults for most of these options to enable
rapid exploration, or you can invest the effort
for more control over the model parameters. We strongly recommend
setting the expected_degree or expected_density argument
to avoid large memory allocations associated with
sampling large, dense graphs." />


<meta name="robots" content="noindex">

<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">fastRG</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="In-development version">0.3.0.9003</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/RoheLab/fastRG/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Create an undirected stochastic blockmodel object</h1>
    <small class="dont-index">Source: <a href='https://github.com/RoheLab/fastRG/blob/master/R/undirected_sbm.R'><code>R/undirected_sbm.R</code></a></small>
    <div class="hidden name"><code>sbm.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>To specify a stochastic blockmodel, you must specify
the number of nodes (via <code>n</code>), the mixing matrix (via <code>k</code> or <code>B</code>),
and the relative block probabilites (optional, via <code>pi</code>).
We provide sane defaults for most of these options to enable
rapid exploration, or you can invest the effort
for more control over the model parameters. We <strong>strongly recommend</strong>
setting the <code>expected_degree</code> or <code>expected_density</code> argument
to avoid large memory allocations associated with
sampling large, dense graphs.</p>
    </div>

    <pre class="usage"><span class='fu'>sbm</span><span class='op'>(</span>
  <span class='va'>n</span>,
  k <span class='op'>=</span> <span class='cn'>NULL</span>,
  B <span class='op'>=</span> <span class='cn'>NULL</span>,
  <span class='va'>...</span>,
  pi <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span><span class='op'>(</span><span class='fl'>1</span><span class='op'>/</span><span class='va'>k</span>, <span class='va'>k</span><span class='op'>)</span>,
  edge_distribution <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"poisson"</span>, <span class='st'>"bernoulli"</span><span class='op'>)</span>,
  sort_nodes <span class='op'>=</span> <span class='cn'>TRUE</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>n</th>
      <td><p>The number of nodes in the network. Must be
a positive integer. This argument is required.</p></td>
    </tr>
    <tr>
      <th>k</th>
      <td><p>(mixing matrix) The number of blocks in the blockmodel.
Use when you don't want to specify the mixing-matrix by hand.
When <code>k</code> is specified, the elements of <code>B</code> are drawn
randomly from a <code><a href='https://rdrr.io/r/stats/Uniform.html'>Uniform(0, 1)</a></code> distribution.
This is subject to change, and may not be reproducible.
<code>k</code> defaults to <code>NULL</code>. You must specify either <code>k</code>
or <code>B</code>, but not both.</p></td>
    </tr>
    <tr>
      <th>B</th>
      <td><p>(mixing matrix) A <code>k</code> by <code>k</code> matrix of block connection
probabilities. The probability that a node in block <code>i</code> connects
to a node in community <code>j</code> is <code><a href='https://rdrr.io/r/stats/Poisson.html'>Poisson(B[i, j])</a></code>. Must be
a square matrix. <code>matrix</code> and <code>Matrix</code> objects are both
acceptable. If <code>B</code> is not symmetric, it will be
symmetrized via the update <code>B := B + t(B)</code>. Defaults to <code>NULL</code>.
You must specify either <code>k</code> or <code>B</code>, but not both.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Arguments passed on to <code><a href='undirected_factor_model.html'>undirected_factor_model</a></code></p><dl>
    <dt><code>expected_degree</code></dt><dd><p>If specified, the desired expected degree
of the graph. Specifying <code>expected_degree</code> simply rescales <code>S</code>
to achieve this. Defaults to <code>NULL</code>. Do not specify both
<code>expected_degree</code> and <code>expected_density</code> at the same time.</p></dd>
    <dt><code>expected_density</code></dt><dd><p>If specified, the desired expected density
of the graph. Specifying <code>expected_density</code> simply rescales <code>S</code>
to achieve this. Defaults to <code>NULL</code>. Do not specify both
<code>expected_degree</code> and <code>expected_density</code> at the same time.</p></dd>
  
</dl></td>
    </tr>
    <tr>
      <th>pi</th>
      <td><p>(relative block probabilities) Relative block
probabilities. Must be positive, but do not need to sum
to one, as they will be normalized internally.
Must match the dimensions of <code>B</code> or <code>k</code>. Defaults to
<code><a href='https://rdrr.io/r/base/rep.html'>rep(1 / k, k)</a></code>, or a balanced blocks.</p></td>
    </tr>
    <tr>
      <th>edge_distribution</th>
      <td><p>Either <code>"poisson"</code> or <code>"bernoulli"</code>. The
default is <code>"poisson"</code>, in which case the SBM can be a
multigraph, i.e. multiple edges between the same two nodes
are allowed. If <code>edge_distribution == "bernoulli"</code> only a
single edge is allowed between any pair of nodes. See Section 2.3
of Rohe et al (2017) for details.</p></td>
    </tr>
    <tr>
      <th>sort_nodes</th>
      <td><p>Logical indicating whether or not to sort the nodes
so that they are grouped by block and by <code>theta</code>. Useful for plotting.
Defaults to <code>TRUE</code>.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>An <code>undirected_sbm</code> S3 object, which is a subclass of the
<code><a href='dcsbm.html'>dcsbm()</a></code> object, with one additional field.</p><ul>
<li><p><code>edge_distribution</code>: Either "poisson" or "bernoulli".</p></li>
</ul>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>A stochastic block is equivalent to a degree-corrected
stochastic blockmodel where the degree heterogeneity parameters
have all been set equal to 1.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p>Other stochastic block models: 
<code><a href='dcsbm.html'>dcsbm</a>()</code>,
<code><a href='directed_dcsbm.html'>directed_dcsbm</a>()</code>,
<code><a href='planted_partition.html'>planted_partition</a>()</code></p>
<p>Other undirected graphs: 
<code><a href='chung_lu.html'>chung_lu</a>()</code>,
<code><a href='dcsbm.html'>dcsbm</a>()</code>,
<code><a href='erdos_renyi.html'>erdos_renyi</a>()</code>,
<code><a href='planted_partition.html'>planted_partition</a>()</code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>27</span><span class='op'>)</span>

<span class='va'>lazy_sbm</span> <span class='op'>&lt;-</span> <span class='fu'>sbm</span><span class='op'>(</span>n <span class='op'>=</span> <span class='fl'>1000</span>, k <span class='op'>=</span> <span class='fl'>5</span>, expected_density <span class='op'>=</span> <span class='fl'>0.01</span><span class='op'>)</span>
<span class='va'>lazy_sbm</span>
</div><div class='output co'>#&gt; $fun
#&gt; function (n, pref.matrix, block.sizes, directed = FALSE, loops = FALSE) 
#&gt; {
#&gt;     n &lt;- as.integer(n)
#&gt;     pref.matrix &lt;- as.matrix(structure(as.double(pref.matrix), 
#&gt;         dim = dim(pref.matrix)))
#&gt;     block.sizes &lt;- as.integer(block.sizes)
#&gt;     directed &lt;- as.logical(directed)
#&gt;     loops &lt;- as.logical(loops)
#&gt;     on.exit(.Call(C_R_igraph_finalizer))
#&gt;     res &lt;- .Call(C_R_igraph_sbm_game, n, pref.matrix, block.sizes, 
#&gt;         directed, loops)
#&gt;     res &lt;- set.graph.attribute(res, "name", "Stochastic block-model")
#&gt;     res &lt;- set.graph.attribute(res, "loops", loops)
#&gt;     res
#&gt; }
#&gt; &lt;bytecode: 0x5651b61f4b88&gt;
#&gt; &lt;environment: namespace:igraph&gt;
#&gt; 
#&gt; $args
#&gt; $n
#&gt; $expr
#&gt; [1] 1000
#&gt; 
#&gt; $env
#&gt; &lt;environment: 0x5651b3b76f70&gt;
#&gt; 
#&gt; attr(,"class")
#&gt; [1] "lazy"
#&gt; 
#&gt; $k
#&gt; $expr
#&gt; [1] 5
#&gt; 
#&gt; $env
#&gt; &lt;environment: 0x5651b3b76f70&gt;
#&gt; 
#&gt; attr(,"class")
#&gt; [1] "lazy"
#&gt; 
#&gt; $expected_density
#&gt; $expr
#&gt; [1] 0.01
#&gt; 
#&gt; $env
#&gt; &lt;environment: 0x5651b3b76f70&gt;
#&gt; 
#&gt; attr(,"class")
#&gt; [1] "lazy"
#&gt; 
#&gt; attr(,"class")
#&gt; [1] "lazy_dots"
#&gt; 
#&gt; $lazy
#&gt; [1] FALSE
#&gt; 
#&gt; attr(,"class")
#&gt; [1] "igraph_constructor_spec"</div><div class='input'>
<span class='co'># by default we get a multigraph (i.e. multiple edges are</span>
<span class='co'># allowed between the same two nodes). using bernoulli edges</span>
<span class='co'># will with an adjacency matrix with only zeroes and ones</span>

<span class='va'>bernoulli_sbm</span> <span class='op'>&lt;-</span> <span class='fu'>sbm</span><span class='op'>(</span>
  n <span class='op'>=</span> <span class='fl'>5000</span>,
  k <span class='op'>=</span> <span class='fl'>300</span>,
  edge_distribution <span class='op'>=</span> <span class='st'>"bernoulli"</span>,
  expected_degree <span class='op'>=</span> <span class='fl'>80</span>
<span class='op'>)</span>

<span class='va'>bernoulli_sbm</span>
</div><div class='output co'>#&gt; $fun
#&gt; function (n, pref.matrix, block.sizes, directed = FALSE, loops = FALSE) 
#&gt; {
#&gt;     n &lt;- as.integer(n)
#&gt;     pref.matrix &lt;- as.matrix(structure(as.double(pref.matrix), 
#&gt;         dim = dim(pref.matrix)))
#&gt;     block.sizes &lt;- as.integer(block.sizes)
#&gt;     directed &lt;- as.logical(directed)
#&gt;     loops &lt;- as.logical(loops)
#&gt;     on.exit(.Call(C_R_igraph_finalizer))
#&gt;     res &lt;- .Call(C_R_igraph_sbm_game, n, pref.matrix, block.sizes, 
#&gt;         directed, loops)
#&gt;     res &lt;- set.graph.attribute(res, "name", "Stochastic block-model")
#&gt;     res &lt;- set.graph.attribute(res, "loops", loops)
#&gt;     res
#&gt; }
#&gt; &lt;bytecode: 0x5651b61f4b88&gt;
#&gt; &lt;environment: namespace:igraph&gt;
#&gt; 
#&gt; $args
#&gt; $n
#&gt; $expr
#&gt; [1] 5000
#&gt; 
#&gt; $env
#&gt; &lt;environment: 0x5651b3b76f70&gt;
#&gt; 
#&gt; attr(,"class")
#&gt; [1] "lazy"
#&gt; 
#&gt; $k
#&gt; $expr
#&gt; [1] 300
#&gt; 
#&gt; $env
#&gt; &lt;environment: 0x5651b3b76f70&gt;
#&gt; 
#&gt; attr(,"class")
#&gt; [1] "lazy"
#&gt; 
#&gt; $edge_distribution
#&gt; $expr
#&gt; [1] "bernoulli"
#&gt; 
#&gt; $env
#&gt; &lt;environment: 0x5651b3b76f70&gt;
#&gt; 
#&gt; attr(,"class")
#&gt; [1] "lazy"
#&gt; 
#&gt; $expected_degree
#&gt; $expr
#&gt; [1] 80
#&gt; 
#&gt; $env
#&gt; &lt;environment: 0x5651b3b76f70&gt;
#&gt; 
#&gt; attr(,"class")
#&gt; [1] "lazy"
#&gt; 
#&gt; attr(,"class")
#&gt; [1] "lazy_dots"
#&gt; 
#&gt; $lazy
#&gt; [1] FALSE
#&gt; 
#&gt; attr(,"class")
#&gt; [1] "igraph_constructor_spec"</div><div class='input'>
<span class='va'>edgelist</span> <span class='op'>&lt;-</span> <span class='fu'><a href='sample_edgelist.directed_erdos_renyi.html'>sample_edgelist</a></span><span class='op'>(</span><span class='va'>bernoulli_sbm</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='error'>Error in UseMethod("sample_edgelist"): no applicable method for 'sample_edgelist' applied to an object of class "igraph_constructor_spec"</span></div><div class='input'><span class='va'>edgelist</span>
</div><div class='output co'>#&gt; <span class='error'>Error in eval(expr, envir, enclos): object 'edgelist' not found</span></div><div class='input'>
<span class='va'>A</span> <span class='op'>&lt;-</span> <span class='fu'><a href='sample_sparse.directed_erdos_renyi.html'>sample_sparse</a></span><span class='op'>(</span><span class='va'>bernoulli_sbm</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='error'>Error in UseMethod("sample_sparse"): no applicable method for 'sample_sparse' applied to an object of class "igraph_constructor_spec"</span></div><div class='input'>
<span class='co'># only zeroes and ones!</span>
<span class='fu'><a href='https://rdrr.io/r/base/sign.html'>sign</a></span><span class='op'>(</span><span class='va'>A</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='error'>Error in eval(expr, envir, enclos): object 'A' not found</span></div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Alex Hayes, Karl Rohe, Jun Tao, Xintian Han, Norbert Binkiewicz.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


