<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Low level interface to sample RPDG edgelists — sample_edgelist.matrix • fastRG</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Low level interface to sample RPDG edgelists — sample_edgelist.matrix"><meta name="description" content="This is a breaks-off, no safety checks interface.
We strongly recommend that you do not call
sample_edgelist.matrix() unless you know what you are doing,
and even then, we still do not recommend it, as you will
bypass all typical input validation.
extremely loud coughing All those who bypass input
validation suffer foolishly at their own hand.
extremely loud coughing"><meta property="og:description" content="This is a breaks-off, no safety checks interface.
We strongly recommend that you do not call
sample_edgelist.matrix() unless you know what you are doing,
and even then, we still do not recommend it, as you will
bypass all typical input validation.
extremely loud coughing All those who bypass input
validation suffer foolishly at their own hand.
extremely loud coughing"><meta name="robots" content="noindex"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">fastRG</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">0.3.2.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/RoheLab/fastRG/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Low level interface to sample RPDG edgelists</h1>
      <small class="dont-index">Source: <a href="https://github.com/RoheLab/fastRG/blob/main/R/sample_edgelist.R" class="external-link"><code>R/sample_edgelist.R</code></a></small>
      <div class="d-none name"><code>sample_edgelist.matrix.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><strong>This is a breaks-off, no safety checks interface.</strong>
We strongly recommend that you do not call
<code>sample_edgelist.matrix()</code> unless you know what you are doing,
and even then, we still do not recommend it, as you will
bypass all typical input validation.
<em><strong>extremely loud coughing</strong></em> All those who bypass input
validation suffer foolishly at their own hand.
<em><strong>extremely loud coughing</strong></em></p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="co"># S3 method for class 'matrix'</span></span>
<span><span class="fu"><a href="sample_edgelist.html">sample_edgelist</a></span><span class="op">(</span></span>
<span>  <span class="va">factor_model</span>,</span>
<span>  <span class="va">S</span>,</span>
<span>  <span class="va">Y</span>,</span>
<span>  <span class="va">directed</span>,</span>
<span>  <span class="va">poisson_edges</span>,</span>
<span>  <span class="va">allow_self_loops</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'Matrix'</span></span>
<span><span class="fu"><a href="sample_edgelist.html">sample_edgelist</a></span><span class="op">(</span></span>
<span>  <span class="va">factor_model</span>,</span>
<span>  <span class="va">S</span>,</span>
<span>  <span class="va">Y</span>,</span>
<span>  <span class="va">directed</span>,</span>
<span>  <span class="va">poisson_edges</span>,</span>
<span>  <span class="va">allow_self_loops</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-factor-model">factor_model<a class="anchor" aria-label="anchor" href="#arg-factor-model"></a></dt>
<dd><p>An <code>n</code> by <code>k1</code> <code><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix()</a></code> or <code><a href="https://rdrr.io/pkg/Matrix/man/Matrix.html" class="external-link">Matrix::Matrix()</a></code>
of latent node positions encoding incoming edge community membership.
The <code>X</code> matrix in Rohe et al (2017). Naming differs only for
consistency with the S3 generic.</p></dd>


<dt id="arg-s">S<a class="anchor" aria-label="anchor" href="#arg-s"></a></dt>
<dd><p>A <code>k1</code> by <code>k2</code> mixing <code><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix()</a></code> or <code><a href="https://rdrr.io/pkg/Matrix/man/Matrix.html" class="external-link">Matrix::Matrix()</a></code>. In
the undirect case this is assumed to be symmetric but <strong>we do not
check that this is the case</strong>.</p></dd>


<dt id="arg-y">Y<a class="anchor" aria-label="anchor" href="#arg-y"></a></dt>
<dd><p>A <code>d</code> by <code>k2</code> <code><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix()</a></code> or <code><a href="https://rdrr.io/pkg/Matrix/man/Matrix.html" class="external-link">Matrix::Matrix()</a></code> of latent
node positions encoding outgoing edge community membership.</p></dd>


<dt id="arg-directed">directed<a class="anchor" aria-label="anchor" href="#arg-directed"></a></dt>
<dd><p>Logical indicating whether or not the graph should be
directed. When <code>directed = FALSE</code>, symmetrizes <code>S</code> internally.
<code>Y = X</code> together with a symmetric <code>S</code> implies a symmetric
expectation (although not necessarily an undirected graph).
When <code>directed = FALSE</code>, samples a directed graph with
symmetric expectation, and then adds edges until symmetry
is achieved.</p></dd>


<dt id="arg-poisson-edges">poisson_edges<a class="anchor" aria-label="anchor" href="#arg-poisson-edges"></a></dt>
<dd><p>Whether or not to remove duplicate edges
after sampling. See Section 2.3 of Rohe et al. (2017)
for some additional details. Defaults to <code>TRUE</code>.</p></dd>


<dt id="arg-allow-self-loops">allow_self_loops<a class="anchor" aria-label="anchor" href="#arg-allow-self-loops"></a></dt>
<dd><p>Logical indicating whether or not
nodes should be allowed to form edges with themselves.
Defaults to <code>TRUE</code>. When <code>FALSE</code>, sampling proceeds allowing
self-loops, and these are then removed after the fact.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Ignored, for generic consistency only.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A single realization of a random Poisson (or Bernoulli)
Dot Product Graph, represented as a <code><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble::tibble()</a></code> with two
integer columns, <code>from</code> and <code>to</code>.</p>
<p><strong>NOTE</strong>: Indices for isolated nodes will not appear in the edgelist!
This can lead to issues if you construct network objects from the
edgelist directly.</p>
<p>In the undirected case, <code>from</code> and <code>to</code> do not encode
information about edge direction, but we will always have
<code>from &lt;= to</code> for convenience of edge identification.</p>
<p>To avoid handling such considerations yourself, we recommend using
<code><a href="sample_sparse.html">sample_sparse()</a></code>, <code><a href="sample_igraph.html">sample_igraph()</a></code>, and <code><a href="sample_tidygraph.html">sample_tidygraph()</a></code>
over <code><a href="sample_edgelist.html">sample_edgelist()</a></code>.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This function implements the <code>fastRG</code> algorithm as
described in Rohe et al (2017). Please see the paper
(which is short and open access!!) for details.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Rohe, Karl, Jun Tao, Xintian Han, and Norbert Binkiewicz. 2017.
"A Note on Quickly Sampling a Sparse Matrix with Low Rank Expectation."
Journal of Machine Learning Research; 19(77):1-13, 2018.
<a href="https://www.jmlr.org/papers/v19/17-128.html" class="external-link">https://www.jmlr.org/papers/v19/17-128.html</a></p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Other samplers:
<code><a href="sample_edgelist.html">sample_edgelist</a>()</code>,
<code><a href="sample_igraph.html">sample_igraph</a>()</code>,
<code><a href="sample_sparse.html">sample_sparse</a>()</code>,
<code><a href="sample_tidygraph.html">sample_tidygraph</a>()</code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">46</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">n</span> <span class="op">&lt;-</span> <span class="fl">10000</span></span></span>
<span class="r-in"><span><span class="va">d</span> <span class="op">&lt;-</span> <span class="fl">1000</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">k1</span> <span class="op">&lt;-</span> <span class="fl">5</span></span></span>
<span class="r-in"><span><span class="va">k2</span> <span class="op">&lt;-</span> <span class="fl">3</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">X</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Poisson.html" class="external-link">rpois</a></span><span class="op">(</span>n <span class="op">=</span> <span class="va">n</span> <span class="op">*</span> <span class="va">k1</span>, <span class="fl">1</span><span class="op">)</span>, nrow <span class="op">=</span> <span class="va">n</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">S</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span>n <span class="op">=</span> <span class="va">k1</span> <span class="op">*</span> <span class="va">k2</span>, <span class="fl">0</span>, <span class="fl">.1</span><span class="op">)</span>, nrow <span class="op">=</span> <span class="va">k1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">Y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Poisson.html" class="external-link">rpois</a></span><span class="op">(</span>n <span class="op">=</span> <span class="va">d</span> <span class="op">*</span> <span class="va">k2</span>, <span class="fl">1</span><span class="op">)</span>, nrow <span class="op">=</span> <span class="va">d</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="sample_edgelist.html">sample_edgelist</a></span><span class="op">(</span><span class="va">X</span>, <span class="va">S</span>, <span class="va">Y</span>, <span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 8,089,734 × 2</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     from    to</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span>  <span style="text-decoration: underline;">2</span>325   310</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span>   531   962</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span>    83   779</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span>  <span style="text-decoration: underline;">2</span>894   294</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span>  <span style="text-decoration: underline;">5</span>454   157</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span>  <span style="text-decoration: underline;">7</span>379   677</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span>  <span style="text-decoration: underline;">9</span>789   178</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span>  <span style="text-decoration: underline;">3</span>077   750</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span>  <span style="text-decoration: underline;">7</span>587   992</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span>  <span style="text-decoration: underline;">1</span>929   387</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 8,089,724 more rows</span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://alexpghayes.com" class="external-link">Alex Hayes</a>, Karl Rohe, Jun Tao, Xintian Han, Norbert Binkiewicz.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

