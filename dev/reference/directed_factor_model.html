<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Create a directed factor model graph — directed_factor_model • fastRG</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/paper/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Create a directed factor model graph — directed_factor_model" />
<meta property="og:description" content="A directed factor model graph is a directed
generalized Poisson random dot product graph. The edges
in this graph are assumpted to be independent and Poisson
distributed. The graph is parameterized by its expected
adjacency matrix, with is E[A] = X S Y'. We do not recommend
that causal users use this function, see instead directed_dcsbm()
and related functions, which will formulate common variants
of the stochastic blockmodels as undirected factor models
with lots of helpful input validation." />


<meta name="robots" content="noindex">

<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">fastRG</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="In-development version">0.3.0.9001</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/RoheLab/fastRG/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Create a directed factor model graph</h1>
    <small class="dont-index">Source: <a href='https://github.com/RoheLab/fastRG/blob/master/R/directed_factor_model.R'><code>R/directed_factor_model.R</code></a></small>
    <div class="hidden name"><code>directed_factor_model.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>A directed factor model graph is a directed
generalized Poisson random dot product graph. The edges
in this graph are assumpted to be independent and Poisson
distributed. The graph is parameterized by its expected
adjacency matrix, with is <code>E[A] = X S Y'</code>. We do not recommend
that causal users use this function, see instead <code><a href='directed_dcsbm.html'>directed_dcsbm()</a></code>
and related functions, which will formulate common variants
of the stochastic blockmodels as undirected factor models
<em>with lots of helpful input validation</em>.</p>
    </div>

    <pre class="usage"><span class='fu'>directed_factor_model</span><span class='op'>(</span>
  <span class='va'>X</span>,
  <span class='va'>S</span>,
  <span class='va'>Y</span>,
  <span class='va'>...</span>,
  expected_in_degree <span class='op'>=</span> <span class='cn'>NULL</span>,
  expected_out_degree <span class='op'>=</span> <span class='cn'>NULL</span>,
  expected_density <span class='op'>=</span> <span class='cn'>NULL</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>X</th>
      <td><p>A <code><a href='https://rdrr.io/r/base/matrix.html'>matrix()</a></code> or <a href='https://rdrr.io/r/base/matrix.html'>Matrix()</a> representing real-valued
latent node positions encoding community structure of
incoming edges. Entries must be positive.</p></td>
    </tr>
    <tr>
      <th>S</th>
      <td><p>A <code><a href='https://rdrr.io/r/base/matrix.html'>matrix()</a></code> or <a href='https://rdrr.io/r/base/matrix.html'>Matrix()</a> mixing matrix. Entries
must be positive.</p></td>
    </tr>
    <tr>
      <th>Y</th>
      <td><p>A <code><a href='https://rdrr.io/r/base/matrix.html'>matrix()</a></code> or <a href='https://rdrr.io/r/base/matrix.html'>Matrix()</a> representing real-valued
latent node positions encoding community structure of
outgoing edges. Entries must be positive.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Ignored. For internal developer use only.</p></td>
    </tr>
    <tr>
      <th>expected_in_degree</th>
      <td><p>If specified, the desired expected in degree
of the graph. Specifying <code>expected_in_degree</code> simply rescales <code>S</code>
to achieve this. Defaults to <code>NULL</code>. Specify only one of
<code>expected_in_degree</code>, <code>expected_out_degree</code>, and <code>expected_density</code>.</p></td>
    </tr>
    <tr>
      <th>expected_out_degree</th>
      <td><p>If specified, the desired expected out degree
of the graph. Specifying <code>expected_out_degree</code> simply rescales <code>S</code>
to achieve this. Defaults to <code>NULL</code>. Specify only one of
<code>expected_in_degree</code>, <code>expected_out_degree</code>, and <code>expected_density</code>.</p></td>
    </tr>
    <tr>
      <th>expected_density</th>
      <td><p>If specified, the desired expected density
of the graph. Specifying <code>expected_density</code> simply rescales <code>S</code>
to achieve this. Defaults to <code>NULL</code>. Specify only one of
<code>expected_in_degree</code>, <code>expected_out_degree</code>, and <code>expected_density</code>.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A <code>directed_factor_model</code> S3 class based on a list
with the following elements:</p><ul>
<li><p><code>X</code>: The incoming latent positions as a <code>Matrix()</code> object.</p></li>
<li><p><code>S</code>: The mixing matrix as a <code>Matrix()</code> object.</p></li>
<li><p><code>Y</code>: The outgoing latent positions as a <code>Matrix()</code> object.</p></li>
<li><p><code>n</code>: The number of nodes with incoming edges in the network.</p></li>
<li><p><code>k1</code>: The dimension of the latent node position vectors
encoding incoming latent communities (i.e. in <code>X</code>).</p></li>
<li><p><code>d</code>: The number of nodes with outgoing edges in the network.
Does not need to match <code>n</code> -- rectangular adjacency matrices
are supported.</p></li>
<li><p><code>k2</code>: The dimension of the latent node position vectors
encoding outgoing latent communities (i.e. in <code>Y</code>).</p></li>
</ul>


    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='va'>n</span> <span class='op'>&lt;-</span> <span class='fl'>10000</span>

<span class='va'>k1</span> <span class='op'>&lt;-</span> <span class='fl'>5</span>
<span class='va'>k2</span> <span class='op'>&lt;-</span> <span class='fl'>3</span>

<span class='va'>d</span> <span class='op'>&lt;-</span> <span class='fl'>5000</span>

<span class='va'>X</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/matrix.html'>matrix</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/stats/Poisson.html'>rpois</a></span><span class='op'>(</span>n <span class='op'>=</span> <span class='va'>n</span> <span class='op'>*</span> <span class='va'>k1</span>, <span class='fl'>1</span><span class='op'>)</span>, nrow <span class='op'>=</span> <span class='va'>n</span><span class='op'>)</span>
<span class='va'>S</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/matrix.html'>matrix</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/stats/Uniform.html'>runif</a></span><span class='op'>(</span>n <span class='op'>=</span> <span class='va'>k1</span> <span class='op'>*</span> <span class='va'>k2</span>, <span class='fl'>0</span>, <span class='fl'>.1</span><span class='op'>)</span>, nrow <span class='op'>=</span> <span class='va'>k1</span>, ncol <span class='op'>=</span> <span class='va'>k2</span><span class='op'>)</span>
<span class='va'>Y</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/matrix.html'>matrix</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/stats/Exponential.html'>rexp</a></span><span class='op'>(</span>n <span class='op'>=</span> <span class='va'>k2</span> <span class='op'>*</span> <span class='va'>d</span>, <span class='fl'>1</span><span class='op'>)</span>, nrow <span class='op'>=</span> <span class='va'>d</span><span class='op'>)</span>

<span class='va'>fm</span> <span class='op'>&lt;-</span> <span class='fu'>directed_factor_model</span><span class='op'>(</span><span class='va'>X</span>, <span class='va'>S</span>, <span class='va'>Y</span><span class='op'>)</span>
<span class='va'>fm</span>
</div><div class='output co'>#&gt; Directed Factor Model
#&gt; ---------------------
#&gt; 
#&gt; Incoming Nodes (n): 10000
#&gt; Incoming Rank (k1): 5
#&gt; Outgoing Rank (k2): 3
#&gt; Outgoing Nodes (d): 5000
#&gt; 
#&gt; X: 10000 x 5 [dgeMatrix] 
#&gt; S: 5 x 3 [dgeMatrix] 
#&gt; Y: 5000 x 3 [dgeMatrix] 
#&gt; 
#&gt; Expected edges: 41302320
#&gt; Expected density: 0.82605
#&gt; Expected in degree: 8260.5
#&gt; Expected out degree: 4130.2</div><div class='input'>
<span class='va'>sane_fm</span> <span class='op'>&lt;-</span> <span class='fu'>directed_factor_model</span><span class='op'>(</span><span class='va'>X</span>, <span class='va'>S</span>, <span class='va'>Y</span>, expected_in_degree <span class='op'>=</span> <span class='fl'>50</span><span class='op'>)</span>
<span class='va'>sane_fm</span>
</div><div class='output co'>#&gt; Directed Factor Model
#&gt; ---------------------
#&gt; 
#&gt; Incoming Nodes (n): 10000
#&gt; Incoming Rank (k1): 5
#&gt; Outgoing Rank (k2): 3
#&gt; Outgoing Nodes (d): 5000
#&gt; 
#&gt; X: 10000 x 5 [dgeMatrix] 
#&gt; S: 5 x 3 [dgeMatrix] 
#&gt; Y: 5000 x 3 [dgeMatrix] 
#&gt; 
#&gt; Expected edges: 250000
#&gt; Expected density: 0.005
#&gt; Expected in degree: 50
#&gt; Expected out degree: 25</div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Alex Hayes, Karl Rohe, Jun Tao, Xintian Han, Norbert Binkiewicz.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


